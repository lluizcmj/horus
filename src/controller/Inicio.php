<?php

	/**
	 * Generated by Getz Framework
	 * 
	 * @author Mario Sakamoto <mskamot@gmail.com>
	 * @see https://wtag.com.br/getz
	 */

	use lib\getz;
	use src\model;	 
	 
	require_once($_DOCUMENT_ROOT . "/lib/getz/Activator.php");

	if ($method == "page") {
		$token = base64_decode($_COOKIE[$_PROJECT]);
		$tokenMath = explode("g3tz", $token);
		$id = ($tokenMath[1] / 128) - 32;
		$daoFactory->beginTransaction();
		$response[0]["usuarios"] = $daoFactory->getUsuariosDao()->read("usuarios.id = " . $id . 
				" AND usuarios.situacao_registro = 1", "usuarios.id ASC", true);
		$daoFactory->close();
		if (is_array($response[0]["usuarios"]) && sizeof($response[0]["usuarios"]) > 0) {
			$darth->setTitle(ucfirst($screen));
			$darth->setDescription("");
			$darth->setKeywords("");
			echo $darth->view($response, $_DOCUMENT_ROOT . $_PACKAGE . "/html/header.html");
			echo $darth->view($response, $_DOCUMENT_ROOT . $_PACKAGE . "/html/inicio.html");
			echo $darth->view($response, $_DOCUMENT_ROOT . $_PACKAGE . "/html/footer.html");
		} else {
			header("Location: " . $darth->getRoot() . "/home");
		}
	}

?>